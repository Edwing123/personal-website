---
import type { PostProps, PostFrontmatter } from '../../types'
import PostLayout from '@layouts/Post.astro'

export async function getStaticPaths() {
    const posts = await Astro.glob<PostFrontmatter>('./posts/*.md')

    return posts.map((post) => ({
        params: {
            slug: post.frontmatter.slug
        },
        props: {
            post
        }
    }))
}

export type Props = {
    post: PostProps & { Content: any }
}

const { post } = Astro.props as Props
const Content = post.Content
---

<PostLayout {...post}>
    <Content />
</PostLayout>
